<nav class="navbar is-fixed-top">
  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="<%= image_path("shopping.png") %>" alt="Shopping">
    </a>
    <div class="navbar-burger js-burger" data-target="navbarExample">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div id="navbarExample" class="navbar-menu">
    <div class="navbar-start">
      <a class="navbar-item <%= active_class('/') %>" href="/"> Products </a>
      
      <!-- Search Form -->
      <%= form_with url: products_path, method: :get, local: true do %>
        <div class="field is-grouped navbar-item">
          <div class="control">
            <input class="input search-placeholder" type="text" name="query" placeholder="Search Products" value="<%= params[:query] %>">
          </div>
          <div class="control">
            <button type="submit" class="button is-primary">Search</button>
          </div>

          <% if params[:category_id].present? %>
            <%= hidden_field_tag :category_id, params[:category_id] %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="navbar-end">
    <div class="navbar-item">
      <div class="buttons">
        <% if logged_in? %>
          <span class="navbar-item has-text-white">Welcome, <%= current_user.first_name %> <%= current_user.last_name %></span>
          <%= button_to 'Logout', logout_path, method: :delete, class: "button is-danger has-text-white" %>
        <% else %>
          <a class="button is-primary" href="/signup">
            <strong>Sign up</strong>
          </a>
          <a class="button is-light" href="/login">
            Login
          </a>
        <% end %>
      </div>
    </div>
  </div>
</nav>